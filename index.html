<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Quick Connect</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css"><script src="https://unpkg.com/feather-icons"></script><style>:root{--primary-color:#3B82F6;--secondary-color:#1D4ED8;--background-color:#F3F4F6;--text-color:#1F2937;--shadow-color:rgba(0,0,0,0.1)}body{font-family:'Poppins',sans-serif;font-size:14px;background-color:var(--background-color);color:var(--text-color);display:flex;flex-direction:column;min-height:100vh}.hidden{display:none}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideIn{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.animate-fadeIn{animation:fadeIn 0.5s ease-out}.animate-slideIn{animation:slideIn 0.5s ease-out}.nav-icon{width:1rem;height:1rem;transition:all 0.3s ease}.nav-link:hover.nav-icon{transform:scale(1.2)}.nav-link{position:relative;overflow:hidden;transition:all 0.3s ease}.nav-link::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:2px;background-color:var(--primary-color);transform:scaleX(0);transition:transform 0.3s ease}.nav-link:hover::after{transform:scaleX(1)}.footer{background-color:#1F2937;color:#fff;padding:20px;text-align:center;width:100%;box-shadow:0-2px 5px var(--shadow-color);margin-top:auto}#mobile-menu{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px var(--shadow-color);transition:right 0.3s ease-in-out;z-index:1000}#mobile-menu.active{right:0}.card{background-color:#fff;border-radius:8px;box-shadow:0 4px 6px var(--shadow-color);padding:2rem;margin-bottom:2rem;transition:transform 0.3s ease,box-shadow 0.3s ease}.card:hover{transform:translateY(-5px);box-shadow:0 6px 12px var(--shadow-color)}.btn{background-color:var(--primary-color);color:#fff;padding:.75rem 1.5rem;border-radius:4px;transition:all 0.3s ease}.btn:hover{background-color:var(--secondary-color);transform:translateY(-2px);box-shadow:0 2px 4px var(--shadow-color)}input,select{width:100%;padding:.5rem;border:1px solid #D1D5DB;border-radius:4px;margin-bottom:1rem;transition:border-color 0.3s ease,box-shadow 0.3s ease}input:focus,select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgb(59 130 246 / .3)}label{display:block;margin-bottom:.5rem;font-weight:600}.auth-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgb(0 0 0 / .5);display:flex;justify-content:center;align-items:center;z-index:1000}.auth-modal-content{background-color:#fff;padding:2rem;border-radius:8px;max-width:400px;width:90%}.phone-success{border-color:green}@keyframes rocketLaunch{0%{transform:translateY(0)rotate(-45deg);opacity:1}100%{transform:translateY(-1000px)rotate(-45deg);opacity:0}}.rocket-spinner{position:fixed;top:50%;left:50%;width:60px;height:60px;margin-top:-30px;margin-left:-30px;z-index:9999;animation:rocketLaunch 2s ease-in forwards}.rocket-spinner svg{width:100%;height:100%}</style></head><body class="bg-gray-100"><!-- Rocket Spinner --><div id="rocket-spinner" class="rocket-spinner hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path><path d="M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path></svg></div><!-- Navbar --><nav class="bg-white shadow-md mb-4 animate-fadeIn sticky top-0 z-50"><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex-shrink-0 flex items-center"><a href="#" class="text-lg font-bold text-blue-600">Quick Connect</a></div><div class="hidden md:flex md:items-center md:justify-end md:flex-1"><div class="flex space-x-4"><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300" id="nav-home"><i data-feather="home" class="nav-icon inline-block mr-1"></i>Home</a><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300" id="nav-data"><i data-feather="database" class="nav-icon inline-block mr-1"></i>Data</a><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300" id="nav-orders"><i data-feather="list" class="nav-icon inline-block mr-1"></i>Orders</a><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300" id="nav-account"><i data-feather="user" class="nav-icon inline-block mr-1"></i>Account</a><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300" id="nav-login"><i data-feather="log-in" class="nav-icon inline-block mr-1"></i>Login</a><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300" id="nav-signup"><i data-feather="user-plus" class="nav-icon inline-block mr-1"></i>Sign Up</a><a href="#" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300 hidden" id="nav-logout"><i data-feather="log-out" class="nav-icon inline-block mr-1"></i>Logout</a></div></div><div class="flex items-center md:hidden"><button id="menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-300" aria-expanded="false"><span class="sr-only">Open main menu</span><i data-feather="menu"></i></button></div></div></div><div id="mobile-menu" class="md:hidden"><div class="px-2 pt-2 pb-3 space-y-1"><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300" id="nav-mobile-home"><i data-feather="home" class="inline-block mr-2"></i>Home</a><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300" id="nav-mobile-data"><i data-feather="database" class="inline-block mr-2"></i>Data</a><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300" id="nav-mobile-orders"><i data-feather="list" class="inline-block mr-2"></i>Orders</a><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300" id="nav-mobile-account"><i data-feather="user" class="inline-block mr-2"></i>Account</a><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300" id="nav-mobile-login"><i data-feather="log-in" class="inline-block mr-2"></i>Login</a><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300" id="nav-mobile-signup"><i data-feather="user-plus" class="inline-block mr-2"></i>Sign Up</a><a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition duration-300 hidden" id="nav-mobile-logout"><i data-feather="log-out" class="inline-block mr-2"></i>Logout</a></div><button id="close-menu" class="absolute top-0 right-0 m-4 text-gray-500 hover:text-gray-700"><i data-feather="x"></i></button></div></nav><!-- Main Content --><div id="main-content" class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8"><!-- Home Page --><div id="home-page" class="card animate-fadeIn"><h1 class="text-2xl font-bold mb-3 text-blue-600">QUICK CONNECT</h1><p class="mb-3 text-sm">Choose from our wide range of data plans and stay connected!</p><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"><div class="bg-green-100 p-4 rounded-lg shadow-md animate-slideIn" style="animation-delay: 0.1s;"><h2 class="text-lg font-semibold mb-2"><i data-feather="sliders" class="inline-block mr-2 text-green-500"></i>Flexible Options</h2><p class="text-sm">Choose from a variety of data plans to suit your needs and budget.</p></div><div class="bg-yellow-100 p-4 rounded-lg shadow-md animate-slideIn" style="animation-delay: 0.2s;"><h2 class="text-lg font-semibold mb-2"><i data-feather="zap" class="inline-block mr-2 text-yellow-500"></i>Super-Fast Activation</h2><p class="text-sm">Get your data plan activated very early after purchase.</p></div><div class="bg-purple-100 p-4 rounded-lg shadow-md animate-slideIn" style="animation-delay: 0.3s;"><h2 class="text-lg font-semibold mb-2"><i data-feather="headphones" class="inline-block mr-2 text-purple-500"></i>24/7 Support</h2><p class="text-sm">Our customer support team is always ready to assist you.</p></div></div><button class="btn" id="go-to-data"><i data-feather="chevron-right" class="inline-block mr-2"></i>BUY DATA BUNDLE</button><a href="agent.html"><button class="btn" id="#"><i data-feather="chevron-right" class="inline-block mr-2"></i>AGENT PORTAL</button></a></div><!-- Data Purchase Page --><div id="data-page" class="card hidden"><h2 class="text-2xl font-bold mb-3 text-blue-600">MTN OFFERS</h2><p class="text-xl font-semibold text-gray-800 mb-2"><span id="price">₵5.50</span>– ₵24.00<span class="text-xs font-normal"></span></p><div class="mb-3"><h3 class="text-base font-semibold mb-2">Quantity</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2" id="size-options"><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="1000" data-price="₵5.50">1GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="2000" data-price="₵10.50">2GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="3000" data-price="₵14.50">3GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="4000" data-price="₵20.50">4GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="5000" data-price="₵24.00">5GB</button></div></div><div class="mb-3"><p class="text-red-600 text-sm mb-2">Delivery time is between 15min to 2hrs</p></div><div class="mb-3"><label for="phone-number" class="block text-sm font-semibold mb-2">Beneficiary Phone Number<span class="text-red-600">*</span></label><input type="text" id="phone-number" class="w-full border border-gray-300 p-2 rounded text-sm" placeholder="Enter number here"></div><button class="btn w-full" id="buy-button"><i data-feather="chevron-right" class="inline-block mr-2"></i>SEND DATA BUNDLE</button><div class="mt-3 text-xs text-gray-600"><p>Category:MTN DATA</p></div></div><!-- Login Page --><div id="login-page" class="card hidden"><h2 class="text-xl font-bold mb-3 text-blue-600"><i data-feather="log-in" class="inline-block mr-2"></i>Login</h2><form id="login-form"><div class="mb-3"><label for="login-email" class="block text-sm font-semibold mb-2">Email</label><input type="email" id="login-email" class="w-full border border-gray-300 p-2 rounded text-sm" required></div><div class="mb-3"><label for="login-password" class="block text-sm font-semibold mb-2">Password</label><input type="password" id="login-password" class="w-full border border-gray-300 p-2 rounded text-sm" required></div><button type="submit" class="btn w-full"><i data-feather="log-in" class="inline-block mr-2"></i>Login</button></form><div class="mt-3 text-center"><a href="#" id="forgot-password-link" class="text-blue-500 hover:underline text-sm"><i data-feather="key" class="inline-block mr-1"></i>Forgot Password?</a></div><div class="mt-3 text-center"><p class="text-sm">Don't have an account? <a href="#" id="go-to-signup" class="text-blue-500 hover:underline">Sign up</a></p>
            </div>
        </div>

        <!-- Signup Page -->
        <div id="signup-page" class="card hidden">
            <h2 class="text-xl font-bold mb-3 text-blue-600"><i data-feather="user-plus" class="inline-block mr-2"></i>Sign Up</h2>
            <form id="signup-form">
                <div class="mb-3">
                    <label for="signup-username" class="block text-sm font-semibold mb-2">Username</label>
                    <input type="text" id="signup-username" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <div class="mb-3">
                    <label for="signup-phone" class="block text-sm font-semibold mb-2">Phone Number</label>
                    <input type="tel" id="signup-phone" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <div class="mb-3">
                    <label for="signup-email" class="block text-sm font-semibold mb-2">Email</label>
                    <input type="email" id="signup-email" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <div class="mb-3">
                    <label for="signup-password" class="block text-sm font-semibold mb-2">Password</label>
                    <input type="password" id="signup-password" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <div class="mb-3">
                    <label for="signup-confirm-password" class="block text-sm font-semibold mb-2">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <button type="submit" class="btn w-full">
                    <i data-feather="user-plus" class="inline-block mr-2"></i>Sign Up
                </button>
            </form>
            <div class="mt-3 text-center">
                <p class="text-sm">Already have an account? <a href="#" id="go-to-login" class="text-blue-500 hover:underline">Login</a></p>
            </div>
        </div>

        <!-- Orders Page -->
        <div id="orders-page" class="card hidden">
            <h2 class="text-xl font-bold mb-3 text-blue-600"><i data-feather="list" class="inline-block mr-2"></i>Recent Orders</h2>
            <div id="orders-list" class="space-y-3 max-h-80 overflow-y-auto pr-2"></div>
        </div>

        <!-- Forgot Password Page -->
        <div id="forgot-password-page" class="card hidden">
            <h2 class="text-xl font-bold mb-3 text-blue-600"><i data-feather="key" class="inline-block mr-2"></i>Forgot Password</h2>
            <form id="forgot-password-form">
                <div class="mb-3">
                    <label for="forgot-password-email" class="block text-sm font-semibold mb-2">Email</label>
                    <input type="email" id="forgot-password-email" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <button type="submit" class="btn w-full">
                    <i data-feather="send" class="inline-block mr-2"></i>Reset Password
                </button>
            </form>
        </div>

        <!-- Account Page -->
        <div id="account-page" class="card hidden">
            <h2 class="text-xl font-bold mb-3 text-blue-600"><i data-feather="user" class="inline-block mr-2"></i>Account Details</h2>
            <form id="account-form">
                <div class="mb-3">
                    <label for="account-username" class="block text-sm font-semibold mb-2">Username</label>
                    <input type="text" id="account-username" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <div class="mb-3">
                    <label for="account-email" class="block text-sm font-semibold mb-2">Email</label>
                    <input type="email" id="account-email" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <div class="mb-3">
                    <label for="account-phone" class="block text-sm font-semibold mb-2">Phone Number</label>
                    <input type="tel" id="account-phone" class="w-full border border-gray-300 p-2 rounded text-sm" required>
                </div>
                <button type="submit" class="btn w-full">
                    <i data-feather="save" class="inline-block mr-2"></i>Save Changes
                </button>
            </form>
            <p id="account-changes-left" class="mt-3 text-xs text-gray-600"></p>
        </div>

        <!-- Receipt Modal -->
        <div id="receipt-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
            <div class="relative top-20 mx-auto p-5 border w-80 shadow-lg rounded-md bg-white animate-fadeIn">
                <div class="mt-3 text-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Order Receipt</h3>
                    <div class="mt-2 px-7 py-3">
                        <div class="text-left">
                            <p class="text-xs text-gray-500" id="receipt-content"></p>
                        </div>
                    </div>
                    <div class="items-center px-4 py-3">
                        <button id="download-receipt" class="btn w-full mb-2">
                            <i data-feather="download" class="inline-block mr-2"></i>Download Receipt
                        </button>
                    </div>
                    <div class="items-center px-4 py-3">
                        <button id="close-receipt" class="px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded-md w-full shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 transition duration-300">
                            <i data-feather="x" class="inline-block mr-2"></i>Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Auth Modal -->
        <div id="auth-modal" class="auth-modal hidden">
            <div class="auth-modal-content">
                <h2 class="text-xl font-bold mb-3 text-blue-600"><i data-feather="lock" class="inline-block mr-2"></i>Authentication Required</h2>
                <p class="mb-4">Please log in or sign up to access this feature.</p>
                <button id="auth-modal-login" class="btn w-full mb-2">
                    <i data-feather="log-in" class="inline-block mr-2"></i>Login
                </button>
                <button id="auth-modal-signup" class="btn w-full">
                    <i data-feather="user-plus" class="inline-block mr-2"></i>Sign Up
                </button>
                <button id="auth-modal-close" class="mt-4 px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded-md w-full shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 transition duration-300">
                    <i data-feather="x" class="inline-block mr-2"></i>Close
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-auto">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm">&copy; 2023 Quick Connect. All rights reserved.</p>
                <div class="flex space-x-4 mt-2 md:mt-0">
                    <a href="#" class="text-white hover:text-blue-300 transition duration-300"><i data-feather="facebook"></i></a>
                    <a href="#" class="text-white hover:text-blue-300 transition duration-300"><i data-feather="twitter"></i></a>
                    <a href="#" class="text-white hover:text-blue-300 transition duration-300"><i data-feather="instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, sendPasswordResetEmail, updateProfile } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
        import { getDatabase, ref, set, push, query, orderByChild, equalTo, limitToLast, onValue, get, update } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

        // Your web app's Firebase configuration const firebaseConfig={apiKey:"AIzaSyB6GlfKxT-l08no6Q3rDWYRLZB6PCnE3is",authDomain:"ckayagents.firebaseapp.com",databaseURL:"https://ckayagents-default-rtdb.firebaseio.com",projectId:"ckayagents",storageBucket:"ckayagents.firebasestorage.app",messagingSenderId:"602589349191",appId:"1:602589349191:web:cbf713b48483aeae327862"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getDatabase(app);const notyf=new Notyf({duration:3000,position:{x:'right',y:'top'},types:[{type:'success',background:'#4CAF50',icon:{className:'notyf__icon--success',tagName:'i',text:'✓'}},{type:'error',background:'#F44336',icon:{className:'notyf__icon--error',tagName:'i',text:'!'}}]});const mainContent=document.getElementById('main-content');const homePage=document.getElementById('home-page');const dataPage=document.getElementById('data-page');const loginPage=document.getElementById('login-page');const signupPage=document.getElementById('signup-page');const ordersPage=document.getElementById('orders-page');const forgotPasswordPage=document.getElementById('forgot-password-page');const navLogin=document.getElementById('nav-login');const navSignup=document.getElementById('nav-signup');const navLogout=document.getElementById('nav-logout');const navOrders=document.getElementById('nav-orders');const mobileMenu=document.getElementById('mobile-menu');const menuButton=document.getElementById('menu-button');const closeMenuButton=document.getElementById('close-menu');const loginForm=document.getElementById('login-form');const signupForm=document.getElementById('signup-form');const forgotPasswordForm=document.getElementById('forgot-password-form');const buyButton=document.getElementById('buy-button');const sizeOptions=document.querySelectorAll('#size-options button');const ordersList=document.getElementById('orders-list');const forgotPasswordLink=document.getElementById('forgot-password-link');const receiptModal=document.getElementById('receipt-modal');const receiptContent=document.getElementById('receipt-content');const downloadReceiptBtn=document.getElementById('download-receipt');const closeReceiptBtn=document.getElementById('close-receipt');const accountForm=document.getElementById('account-form');const accountChangesLeft=document.getElementById('account-changes-left');const authModal=document.getElementById('auth-modal');const authModalLogin=document.getElementById('auth-modal-login');const authModalSignup=document.getElementById('auth-modal-signup');const authModalClose=document.getElementById('auth-modal-close');const goToSignup=document.getElementById('go-to-signup');const goToLogin=document.getElementById('go-to-login');const phoneNumberInput=document.getElementById('phone-number');const rocketSpinner=document.getElementById('rocket-spinner');let currentUser=null;let selectedSize=null;let selectedPrice=null;let currentUsername='';let accountChangesCount=0;function showPage(pageId){const pages=[homePage,dataPage,loginPage,signupPage,ordersPage,forgotPasswordPage,document.getElementById('account-page')];pages.forEach(page=>page.classList.add('hidden'));document.getElementById(pageId).classList.remove('hidden');document.getElementById(pageId).classList.add('animate-fadeIn')}function updateNavigation(){const navItems=['login','signup','logout','orders','account'];navItems.forEach(item=>{const desktopItem=document.getElementById(`nav-${item}`);const mobileItem=document.getElementById(`nav-mobile-${item}`);if(currentUser){if(item==='login'||item==='signup'){desktopItem.classList.add('hidden');mobileItem.classList.add('hidden')}else{desktopItem.classList.remove('hidden');mobileItem.classList.remove('hidden')}}else{if(item==='login'||item==='signup'){desktopItem.classList.remove('hidden');mobileItem.classList.remove('hidden')}else{desktopItem.classList.add('hidden');mobileItem.classList.add('hidden')}}})}document.getElementById('nav-home').addEventListener('click',()=>showPage('home-page'));document.getElementById('nav-data').addEventListener('click',()=>showPage('data-page'));document.getElementById('nav-login').addEventListener('click',()=>showPage('login-page'));document.getElementById('nav-signup').addEventListener('click',()=>showPage('signup-page'));document.getElementById('nav-orders').addEventListener('click',()=>{if(currentUser){showPage('orders-page');loadOrders()}else{showAuthModal()}});document.getElementById('nav-logout').addEventListener('click',logout);forgotPasswordLink.addEventListener('click',(e)=>{e.preventDefault();showPage('forgot-password-page')});document.getElementById('nav-mobile-home').addEventListener('click',()=>{showPage('home-page');mobileMenu.classList.remove('active')});document.getElementById('nav-mobile-data').addEventListener('click',()=>{showPage('data-page');mobileMenu.classList.remove('active')});document.getElementById('nav-mobile-orders').addEventListener('click',()=>{if(currentUser){showPage('orders-page');loadOrders()}else{showAuthModal()}mobileMenu.classList.remove('active')});document.getElementById('nav-mobile-login').addEventListener('click',()=>{showPage('login-page');mobileMenu.classList.remove('active')});document.getElementById('nav-mobile-signup').addEventListener('click',()=>{showPage('signup-page');mobileMenu.classList.remove('active')});document.getElementById('nav-mobile-logout').addEventListener('click',()=>{logout();mobileMenu.classList.remove('active')});document.getElementById('go-to-data').addEventListener('click',()=>showPage('data-page'));menuButton.addEventListener('click',()=>{mobileMenu.classList.toggle('active')});closeMenuButton.addEventListener('click',()=>{mobileMenu.classList.remove('active')});function validatePhoneNumber(number){const cleanNumber=number.replace(/\D/g,'');return cleanNumber.length===10&&cleanNumber.startsWith('0')}phoneNumberInput.addEventListener('input',function(){if(validatePhoneNumber(this.value)){this.classList.add('phone-success');notyf.success('Valid number, chale!')}else{this.classList.remove('phone-success')}});async function login(email,password){try{const userCredential=await signInWithEmailAndPassword(auth,email,password);currentUser=userCredential.user;const userRef=ref(db,'users/'+currentUser.uid);const snapshot=await get(userRef);if(snapshot.exists()){currentUsername=snapshot.val().username;accountChangesCount=snapshot.val().accountChangesCount||0}else{currentUsername=currentUser.displayName||'N/A';accountChangesCount=0}notyf.success('Akwaaba (Welcome back)');updateNavigation();showPage('home-page')}catch(error){notyf.error(error.message)}}async function signup(username,phone,email,password){try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);currentUser=userCredential.user;await updateProfile(currentUser,{displayName:username});await set(ref(db,'users/'+currentUser.uid),{username:username,phone:phone,email:email,accountChangesCount:0});currentUsername=username;accountChangesCount=0;notyf.success('Account created successfully');updateNavigation();showPage('home-page')}catch(error){notyf.error(error.message)}}async function logout(){try{await signOut(auth);currentUser=null;currentUsername='';accountChangesCount=0;notyf.success('Logged out successfully');updateNavigation();showPage('home-page')}catch(error){notyf.error(error.message)}}async function resetPassword(email){try{await sendPasswordResetEmail(auth,email);notyf.success('Password reset email sent. Check your inbox.');showPage('login-page')}catch(error){notyf.error(error.message)}}loginForm.addEventListener('submit',(e)=>{e.preventDefault();const email=document.getElementById('login-email').value;const password=document.getElementById('login-password').value;login(email,password)});signupForm.addEventListener('submit',(e)=>{e.preventDefault();const username=document.getElementById('signup-username').value;const phone=document.getElementById('signup-phone').value;const email=document.getElementById('signup-email').value;const password=document.getElementById('signup-password').value;const confirmPassword=document.getElementById('signup-confirm-password').value;if(password!==confirmPassword){notyf.error('Passwords do not match');return}signup(username,phone,email,password)});forgotPasswordForm.addEventListener('submit',(e)=>{e.preventDefault();const email=document.getElementById('forgot-password-email').value;resetPassword(email)});sizeOptions.forEach(button=>{button.addEventListener('click',()=>{sizeOptions.forEach(btn=>btn.classList.remove('bg-blue-500','text-white'));button.classList.add('bg-blue-500','text-white');selectedSize=button.getAttribute('data-size');selectedPrice=button.getAttribute('data-price');document.getElementById('price').textContent=selectedPrice})});function calculateTax(price){const numericPrice=parseFloat(price.replace('₵',''));let taxRate;if(numericPrice<=5){taxRate=0.02}else if(numericPrice<=50){taxRate=0.03}else{taxRate=0.04}const tax=numericPrice*taxRate;const total=numericPrice+tax;return{tax:tax.toFixed(2),total:total.toFixed(2)}}buyButton.addEventListener('click',()=>{if(!currentUser){showAuthModal();return}const phoneNumber=document.getElementById('phone-number').value;if(!selectedSize){notyf.error('Please select a data size.');return}if(!validatePhoneNumber(phoneNumber)){notyf.error('Ei, we need correct 10-digit number starting with 0!');return}const{tax,total}=calculateTax(selectedPrice);const reference='TXN-'+Date.now()+'-'+Math.random().toString(36).substring(2,5);const payload={phone:phoneNumber,volume:selectedSize,reference:reference,referrer:currentUser.phoneNumber||'',webhook:'https://your-webhook-url.com/callback'};rocketSpinner.classList.remove('hidden');const handler=PaystackPop.setup({key:'pk_live_0e70d8a9612b98c92761e3478abc47f900338df2',email:currentUser.email,amount:parseFloat(total)*100,currency:'GHS',ref:reference,callback:function(response){if(response.status==='success'){saveOrder(phoneNumber,selectedSize,selectedPrice,tax,total,reference);showReceipt(phoneNumber,selectedSize,selectedPrice,tax,total,reference);notyf.success('Payment successful. Transaction ref is '+response.reference);fetch('https://console.hubnet.app/live/api/context/business/transaction/mtn-new-transaction',{method:'POST',headers:{'Content-Type':'application/json','token':'Bearer v61fayeo5LeSlVy1AgjHqgXFrYAgogDr2E7'},body:JSON.stringify(payload)}).then(response=>response.json()).then(data=>{if(data.status){notyf.success('Data bundle on the way.')}else{notyf.error('Failed to send data bundle. Please try again.')}}).catch(error=>{notyf.error('An error occurred while processing the transaction.');console.error('Error:',error)});clearForm();showPage('home-page')}else{notyf.error('Payment failed. Please try again.')}rocketSpinner.classList.add('hidden')},onClose:function(){notyf.error('Transaction was not completed, window closed.');rocketSpinner.classList.add('hidden')}});handler.openIframe()});async function saveOrder(phoneNumber,size,price,tax,total,reference){try{const newOrderRef=push(ref(db,'orders'));await set(newOrderRef,{userId:currentUser.uid,username:currentUsername,phoneNumber:phoneNumber,size:size,price:price,tax:tax,total:total,reference:reference,timestamp:Date.now(),status:'pending'});notyf.success('Order saved successfully')}catch(error){notyf.error('Error saving order: '+error.message)}}async function loadOrders(){if(!currentUser)return;try{const ordersRef=ref(db,'orders');const userOrdersQuery=query(ordersRef,orderByChild('userId'),equalTo(currentUser.uid),limitToLast(10));onValue(userOrdersQuery,(snapshot)=>{ordersList.innerHTML='';if(snapshot.exists()){const orders=[];snapshot.forEach((childSnapshot)=>{orders.push({id:childSnapshot.key,...childSnapshot.val()})});orders.sort((a,b)=>b.timestamp-a.timestamp);orders.forEach((order)=>{const orderElement=document.createElement('div');orderElement.className='bg-gray-100 p-3 rounded mb-3 animate-slideIn text-xs';orderElement.innerHTML=` <p><strong>Username:</strong>${order.username || 'N/A'}</p><p><strong>Size:</strong>${order.size}</p><p><strong>Price:</strong>${order.price}</p><p><strong>Tax:</strong>₵${order.tax}</p><p><strong>Total:</strong>₵${order.total}</p><p><strong>Phone:</strong>${order.phoneNumber}</p><p><strong>Reference:</strong>${order.reference}</p><p><strong>Date:</strong>${new Date(order.timestamp).toLocaleString()}</p><p><strong>Status:</strong><span class="status-${order.status}">${order.status}</span></p>`;ordersList.appendChild(orderElement)})}else{ordersList.innerHTML='<p class="text-sm">No orders found.</p>'}},{onlyOnce:!0})}catch(error){notyf.error('Error loading orders: '+error.message)}}function showReceipt(phoneNumber,size,price,tax,total,reference){const receiptHTML=` <div class="text-left text-xs"><p><strong>Name:</strong>${currentUsername || 'N/A'}</p><p><strong>Size:</strong>${size}</p><p><strong>Price:</strong>${price}</p><p><strong>Tax:</strong>₵${tax}</p><p><strong>Total:</strong>₵${total}</p><p><strong>Phone:</strong>${phoneNumber}</p><p><strong>Reference:</strong>${reference}</p><p><strong>Date:</strong>${new Date().toLocaleString()}</p><p><strong>Status:</strong>Pending</p></div>`;receiptContent.innerHTML=receiptHTML;receiptModal.classList.remove('hidden')}downloadReceiptBtn.addEventListener('click',()=>{const receiptText=receiptContent.innerText;const blob=new Blob([receiptText],{type:'text/plain'});const url=URL.createObjecturl(blob);const a=document.createElement('a');a.href=url;a.download='receipt.txt';document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjecturl(url)});closeReceiptBtn.addEventListener('click',()=>{receiptModal.classList.add('hidden')});document.getElementById('nav-account').addEventListener('click',()=>{if(currentUser){showPage('account-page')}else{showAuthModal()}});document.getElementById('nav-mobile-account').addEventListener('click',()=>{if(currentUser){showPage('account-page')}else{showAuthModal()}mobileMenu.classList.remove('active')});const accountUsername=document.getElementById('account-username');const accountEmail=document.getElementById('account-email');const accountPhone=document.getElementById('account-phone');function loadAccountDetails(){if(currentUser){const userRef=ref(db,'users/'+currentUser.uid);onValue(userRef,(snapshot)=>{const userData=snapshot.val();if(userData){accountUsername.value=userData.username||'';accountEmail.value=userData.email||'';accountPhone.value=userData.phone||'';accountChangesCount=userData.accountChangesCount||0;updateAccountChangesLeft()}},{onlyOnce:!0})}}function updateAccountChangesLeft(){const changesLeft=2-accountChangesCount;accountChangesLeft.textContent=`Changes left:${changesLeft}`;if(changesLeft===0){accountForm.querySelector('button[type="submit"]').disabled=!0}}accountForm.addEventListener('submit',async(e)=>{e.preventDefault();if(currentUser&&accountChangesCount<2){try{await update(ref(db,'users/'+currentUser.uid),{username:accountUsername.value,email:accountEmail.value,phone:accountPhone.value,accountChangesCount:accountChangesCount+1});await updateProfile(currentUser,{displayName:accountUsername.value});currentUsername=accountUsername.value;accountChangesCount++;updateAccountChangesLeft();notyf.success('Account details updated successfully')}catch(error){notyf.error('Error updating account details: '+error.message)}}else{notyf.error('You have reached the maximum number of account changes.')}});function clearForm(){document.getElementById('phone-number').value='';sizeOptions.forEach(btn=>btn.classList.remove('bg-blue-500','text-white'));selectedSize=null;selectedPrice=null;document.getElementById('price').textContent='₵5.50'}function showAuthModal(){authModal.classList.remove('hidden')}function hideAuthModal(){authModal.classList.add('hidden')}authModalLogin.addEventListener('click',()=>{hideAuthModal();showPage('login-page')});authModalSignup.addEventListener('click',()=>{hideAuthModal();showPage('signup-page')});authModalClose.addEventListener('click',hideAuthModal);goToSignup.addEventListener('click',(e)=>{e.preventDefault();showPage('signup-page')});goToLogin.addEventListener('click',(e)=>{e.preventDefault();showPage('login-page')});auth.onAuthStateChanged((user)=>{currentUser=user;if(user){const userRef=ref(db,'users/'+user.uid);get(userRef).then((snapshot)=>{if(snapshot.exists()){currentUsername=snapshot.val().username;accountChangesCount=snapshot.val().accountChangesCount||0}else{currentUsername=user.displayName||'N/A';accountChangesCount=0}loadAccountDetails();updateAccountChangesLeft()})}else{currentUsername='';accountChangesCount=0}updateNavigation();showPage('home-page')});feather.replace();</script></body></html>
