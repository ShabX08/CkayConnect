<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Quick Connect-Data Portal</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css"><script src="https://unpkg.com/feather-icons"></script><style>:root{--primary-color:#3B82F6;--secondary-color:#1D4ED8;--background-color:#F3F4F6;--text-color:#1F2937;--shadow-color:rgba(0,0,0,0.1)}
body{font-family:'Poppins',sans-serif;font-size:14px;background-color:var(--background-color);color:var(--text-color);display:flex;flex-direction:column;min-height:100vh}.hidden{display:none}
@keyframes fadeIn{from{opacity:0}
to{opacity:1}}
@keyframes slideIn{from{transform:translateY(20px);opacity:0}
to{transform:translateY(0);opacity:1}}.animate-fadeIn{animation:fadeIn 0.5s ease-out}.animate-slideIn{animation:slideIn 0.5s ease-out}.card{background-color:#fff;border-radius:8px;box-shadow:0 4px 6px var(--shadow-color);padding:2rem;margin-bottom:2rem;transition:transform 0.3s ease,box-shadow 0.3s ease}.card:hover{transform:translateY(-5px);box-shadow:0 6px 12px var(--shadow-color)}.btn{background-color:var(--primary-color);color:#fff;padding:0.75rem 1.5rem;border-radius:4px;transition:all 0.3s ease}.btn:hover{background-color:var(--secondary-color);transform:translateY(-2px);box-shadow:0 2px 4px var(--shadow-color)}
input,select{width:100%;padding:0.5rem;border:1px solid #D1D5DB;border-radius:4px;margin-bottom:1rem;transition:border-color 0.3s ease,box-shadow 0.3s ease}
input:focus,select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(59,130,246,0.3)}
label{display:block;margin-bottom:0.5rem;font-weight:600}.phone-success{border-color:green}
@keyframes rocketLaunch{0%{transform:translateY(0)rotate(-45deg);opacity:1}
100%{transform:translateY(-1000px)rotate(-45deg);opacity:0}}.rocket-spinner{position:fixed;top:50%;left:50%;width:60px;height:60px;margin-top:-30px;margin-left:-30px;z-index:9999;animation:rocketLaunch 2s ease-in forwards}.rocket-spinner svg{width:100%;height:100%}</style></head><body class="bg-gray-100"><!-- Rocket Spinner --><div id="rocket-spinner" class="rocket-spinner hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path><path d="M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path></svg></div><!-- Main Content --><div class="container mx-auto px-4 py-8"><h1 class="text-3xl font-bold text-center mb-8">Quick Connect-Data Portal</h1><div class="mt-8 text-center"><a href="index.html"><button id="#" class="btn">Return to main page</button></a></div><div id="data-section" class="card"><h2 class="text-2xl font-bold mb-4">MTN Data Offers</h2><div class="mb-4"><p class="text-xl font-semibold"><span id="price">₵4.70</span>– ₵27.00</p></div><div class="mb-4"><h3 class="text-lg font-semibold mb-2">Select Data Size</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2" id="size-options"><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="1000" data-price="₵4.70">1GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="2000" data-price="₵9.90">2GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="3000" data-price="₵13.90">3GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="4000" data-price="₵19.00">4GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="5000" data-price="₵22.50">5GB</button><button class="border border-gray-300 py-2 px-4 text-sm hover:bg-blue-100 transition duration-300 rounded" data-size="6000" data-price="₵27.00">6GB</button></div></div><div class="mb-4"><p class="text-red-600 text-sm">Delivery time is between 15min to 2hrs</p></div><div class="mb-4"><label for="phone-number">Beneficiary Phone Number<span class="text-red-600">*</span></label><input type="text" id="phone-number" class="w-full border border-gray-300 p-2 rounded" placeholder="Enter number here"></div><div class="mb-4"><label for="unique-code">Unique Code<span class="text-red-600">*</span></label><input type="text" id="unique-code" class="w-full border border-gray-300 p-2 rounded" placeholder="Enter unique code"></div><button class="btn w-full" id="buy-button"><i data-feather="shopping-cart" class="inline-block mr-2"></i>Buy Data Bundle</button></div><div class="card mt-8"><h2 class="text-2xl font-bold mb-4">Recent Orders</h2><div id="orders-list" class="space-y-4"></div></div></div><script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script><script src="https://js.paystack.co/v1/inline.js"></script><script type="module">import{initializeApp}from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";import{getAuth,onAuthStateChanged}from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";import{getDatabase,ref,set,push,query,orderByChild,equalTo,limitToLast,onValue,get}from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";const firebaseConfig={apiKey:"AIzaSyB6GlfKxT-l08no6Q3rDWYRLZB6PCnE3is",authDomain:"ckayagents.firebaseapp.com",databaseURL:"https://ckayagents-default-rtdb.firebaseio.com",projectId:"ckayagents",storageBucket:"ckayagents.firebasestorage.app",messagingSenderId:"602589349191",appId:"1:602589349191:web:cbf713b48483aeae327862"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getDatabase(app);const notyf=new Notyf({duration:3000,position:{x:'right',y:'top'},types:[{type:'success',background:'#4CAF50',icon:{className:'notyf__icon--success',tagName:'i',text:'✓'}},{type:'error',background:'#F44336',icon:{className:'notyf__icon--error',tagName:'i',text:'!'}}]});const buyButton=document.getElementById('buy-button');const sizeOptions=document.querySelectorAll('#size-options button');const phoneNumberInput=document.getElementById('phone-number');const uniqueCodeInput=document.getElementById('unique-code');const ordersList=document.getElementById('orders-list');const rocketSpinner=document.getElementById('rocket-spinner');const returnButton=document.getElementById('return-button');let selectedSize=null;let selectedPrice=null;let currentUser=null;const uniqueCodes={'QUICKCONNECT123':null,'FASTDATA456':null,'MEGABYTES789':null,'GIGAPOWER321':null,'SPEEDNET654':null};onAuthStateChanged(auth,(user)=>{if(user){currentUser=user;loadOrders();checkUniqueCode()}else{window.location.href='index.html'}});function validatePhoneNumber(number){const cleanNumber=number.replace(/\D/g,'');return cleanNumber.length===10&&cleanNumber.startsWith('0')}
phoneNumberInput.addEventListener('input',function(){if(validatePhoneNumber(this.value)){this.classList.add('phone-success');notyf.success('Valid number, chale!')}else{this.classList.remove('phone-success')}});sizeOptions.forEach(button=>{button.addEventListener('click',()=>{sizeOptions.forEach(btn=>btn.classList.remove('bg-blue-500','text-white'));button.classList.add('bg-blue-500','text-white');selectedSize=button.getAttribute('data-size');selectedPrice=button.getAttribute('data-price');document.getElementById('price').textContent=selectedPrice})});function calculateTax(price){const numericPrice=parseFloat(price.replace('₵',''));const taxRate=0.02;const tax=numericPrice*taxRate;const total=numericPrice+tax;return{tax:tax.toFixed(2),total:total.toFixed(2)}}
async function checkUniqueCode(){if(!currentUser)return;const userRef=ref(db,`users/${currentUser.uid}`);const snapshot=await get(userRef);if(snapshot.exists()){const userData=snapshot.val();if(userData.uniqueCode){uniqueCodeInput.value=userData.uniqueCode;uniqueCodeInput.disabled=!0}}}
buyButton.addEventListener('click',async()=>{const phoneNumber=phoneNumberInput.value;const uniqueCode=uniqueCodeInput.value;if(!selectedSize){notyf.error('Please select a data size.');return}
if(!validatePhoneNumber(phoneNumber)){notyf.error('Ei, we need correct 10-digit number starting with 0!');return}
if(!uniqueCodes.hasOwnProperty(uniqueCode)){notyf.error('Invalid unique code. Please try again.');return}
if(uniqueCodes[uniqueCode]&&uniqueCodes[uniqueCode]!==currentUser.email){notyf.error('This unique code is already in use.');return}
uniqueCodes[uniqueCode]=currentUser.email;const userRef=ref(db,`users/${currentUser.uid}`);await set(userRef,{email:currentUser.email,uniqueCode:uniqueCode});const{tax,total}=calculateTax(selectedPrice);const reference='TXN-'+Date.now()+'-'+Math.random().toString(36).substring(2,5);const payload={phone:phoneNumber,volume:selectedSize,reference:reference,webhook:'https://your-webhook-url.com/callback'};rocketSpinner.classList.remove('hidden');const handler=PaystackPop.setup({key:'pk_live_0e70d8a9612b98c92761e3478abc47f900338df2',email:currentUser.email,amount:parseFloat(total)*100,currency:'GHS',ref:reference,callback:function(response){if(response.status==='success'){saveOrder(phoneNumber,selectedSize,selectedPrice,tax,total,reference);showReceipt(phoneNumber,selectedSize,selectedPrice,tax,total,reference);notyf.success('Payment successful. Transaction ref is '+response.reference);fetch('https://console.hubnet.app/live/api/context/business/transaction/mtn-new-transaction',{method:'POST',headers:{'Content-Type':'application/json','token':'Bearer v61fayeo5LeSlVy1AgjHqgXFrYAgogDr2E7'},body:JSON.stringify(payload)}).then(response=>response.json()).then(data=>{if(data.status){notyf.success('Data bundle on the way.')}else{notyf.error('Failed to send data bundle. Please try again.')}}).catch(error=>{notyf.error('An error occurred while processing the transaction.');console.error('Error:',error)});clearForm()}else{notyf.error('Payment failed. Please try again.')}
rocketSpinner.classList.add('hidden')},onClose:function(){notyf.error('Transaction was not completed, window closed.');rocketSpinner.classList.add('hidden')}});handler.openIframe()});async function saveOrder(phoneNumber,size,price,tax,total,reference){try{const newOrderRef=push(ref(db,'orders'));await set(newOrderRef,{userId:currentUser.uid,email:currentUser.email,phoneNumber:phoneNumber,size:size,price:price,tax:tax,total:total,reference:reference,timestamp:Date.now(),status:'pending'});notyf.success('Order saved successfully');loadOrders()}catch(error){notyf.error('Error saving order: '+error.message)}}
async function loadOrders(){try{const ordersRef=ref(db,'orders');const userOrdersQuery=query(ordersRef,orderByChild('userId'),equalTo(currentUser.uid),limitToLast(5));onValue(userOrdersQuery,(snapshot)=>{ordersList.innerHTML='';if(snapshot.exists()){const orders=[];snapshot.forEach((childSnapshot)=>{orders.push({id:childSnapshot.key,...childSnapshot.val()})});orders.sort((a,b)=>b.timestamp-a.timestamp);orders.forEach((order)=>{const orderElement=document.createElement('div');orderElement.className='bg-gray-100 p-3 rounded mb-3 text-sm';orderElement.innerHTML=`
                        <p><strong>Size:</strong> ${order.size}</p>
                        <p><strong>Price:</strong> ${order.price}</p>
                        <p><strong>Total:</strong> ₵${order.total}</p>
                        <p><strong>Phone:</strong> ${order.phoneNumber}</p>
                        <p><strong>Reference:</strong> ${order.reference}</p>
                        <p><strong>Date:</strong> ${new Date(order.timestamp).toLocaleString()}</p>
                        <p><strong>Status:</strong> <span class="status-${order.status}">${order.status}</span></p>
                    `;ordersList.appendChild(orderElement)})}else{ordersList.innerHTML='<p class="text-sm">No orders found.</p>'}})}catch(error){notyf.error('Error loading orders: '+error.message)}}
function showReceipt(phoneNumber,size,price,tax,total,reference){const receiptHTML=`
        <div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full" id="receipt-modal">
            <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                <div class="mt-3 text-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Order Receipt</h3>
                    <div class="mt-2 px-7 py-3">
                        <p class="text-sm text-gray-500">
                            <strong>Size:</strong> ${size}<br>
                            <strong>Price:</strong> ${price}<br>
                            <strong>Tax:</strong> ₵${tax}<br>
                            <strong>Total:</strong> ₵${total}<br>
                            <strong>Phone:</strong> ${phoneNumber}<br>
                            <strong>Reference:</strong> ${reference}<br>
                            <strong>Date:</strong> ${new Date().toLocaleString()}<br>
                            <strong>Status:</strong> Pending
                        </p>
                    </div>
                    <div class="items-center px-4 py-3">
                        <button id="close-receipt" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;document.body.insertAdjacentHTML('beforeend',receiptHTML);document.getElementById('close-receipt').addEventListener('click',()=>{document.getElementById('receipt-modal').remove()})}
function clearForm(){phoneNumberInput.value='';sizeOptions.forEach(btn=>btn.classList.remove('bg-blue-500','text-white'));selectedSize=null;selectedPrice=null;document.getElementById('price').textContent='₵3.00'}
returnButton.addEventListener('click',()=>{window.location.href='index.html'});feather.replace();</script></body></html>
