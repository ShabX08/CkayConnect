<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Quick Connect Admin Panel</title><script src="https://cdn.tailwindcss.com"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css"><style>body{font-family:'Poppins',sans-serif}.card{transition:all 0.3s ease}.card:hover{transform:translateY(-5px);box-shadow:0 4px 6px rgb(0 0 0 / .1)}@media(max-width:640px){.text-xs{font-size:.65rem}.text-sm{font-size:.75rem}}</style></head><body class="bg-gray-100"><nav class="bg-blue-600 text-white p-4 sticky top-0 z-10"><div class="container mx-auto"><h1 class="text-2xl font-bold">Quick Connect Admin Panel</h1></div></nav><div class="container mx-auto p-4"><div id="auth-status" class="mb-4 text-center font-semibold"></div><div id="login-form" class="mb-4 text-center hidden"><input type="email" id="email" placeholder="Email" class="p-2 border rounded mr-2"><input type="password" id="password" placeholder="Password" class="p-2 border rounded mr-2"><button id="login-btn" class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600">Login</button></div><div id="logout-btn" class="mb-4 text-center hidden"><button class="bg-red-500 text-white p-2 rounded hover:bg-red-600">Logout</button></div><div id="admin-content" class="hidden"><div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8"><div class="bg-white p-4 rounded-lg shadow text-center"><p class="text-sm font-semibold">Total Users</p><p class="text-2xl font-bold" id="total-users">0</p></div><div class="bg-white p-4 rounded-lg shadow text-center"><p class="text-sm font-semibold">Total Orders</p><p class="text-2xl font-bold" id="total-orders">0</p></div><div class="bg-white p-4 rounded-lg shadow text-center"><p class="text-sm font-semibold">Pending Orders</p><p class="text-2xl font-bold" id="pending-orders">0</p></div><div class="bg-white p-4 rounded-lg shadow text-center"><p class="text-sm font-semibold">Failed Orders</p><p class="text-2xl font-bold" id="failed-orders">0</p></div></div><div class="mb-8"><h2 class="text-2xl font-semibold mb-4">Users</h2><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="users-container"><!-- User cards will be dynamically added here --></div></div><div><h2 class="text-2xl font-semibold mb-4">Orders</h2><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="orders-container"><!-- Order cards will be dynamically added here --></div></div></div></div><!-- Edit User Modal --><div id="edit-user-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><h3 class="text-lg font-semibold mb-4">Edit User</h3><form id="edit-user-form"><input type="hidden" id="edit-user-id"><div class="mb-4"><label for="edit-username" class="block text-sm font-medium text-gray-700">Username</label><input type="text" id="edit-username" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"></div><div class="mb-4"><label for="edit-email" class="block text-sm font-medium text-gray-700">Email</label><input type="email" id="edit-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"></div><div class="mb-4"><label for="edit-phone" class="block text-sm font-medium text-gray-700">Phone</label><input type="tel" id="edit-phone" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"></div><div class="flex justify-end"><button type="button" id="close-edit-user-modal" class="mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">Cancel</button><button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save Changes</button></div></form></div></div><!-- Edit Order Modal --><div id="edit-order-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><h3 class="text-lg font-semibold mb-4">Edit Order</h3><form id="edit-order-form"><input type="hidden" id="edit-order-id"><div class="mb-4"><label for="edit-order-status" class="block text-sm font-medium text-gray-700">Status</label><select id="edit-order-status" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"><option value="pending">Pending</option><option value="processing">Processing</option><option value="completed">Completed</option><option value="failed">Failed</option></select></div><div class="flex justify-end"><button type="button" id="close-edit-order-modal" class="mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">Cancel</button><button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save Changes</button></div></form></div></div><script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script><script type="module">import{initializeApp}from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";import{getDatabase,ref,onValue,remove,update,get}from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";import{getAuth,signInWithEmailAndPassword,signOut,onAuthStateChanged}from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";const firebaseConfig={apiKey:"AIzaSyB6GlfKxT-l08no6Q3rDWYRLZB6PCnE3is",authDomain:"ckayagents.firebaseapp.com",databaseURL:"https://ckayagents-default-rtdb.firebaseio.com",projectId:"ckayagents",storageBucket:"ckayagents.firebasestorage.app",messagingSenderId:"602589349191",appId:"1:602589349191:web:cbf713b48483aeae327862"};const app=initializeApp(firebaseConfig);const db=getDatabase(app);const auth=getAuth(app);const notyf=new Notyf({duration:3000,position:{x:'right',y:'top'},});const authStatus=document.getElementById('auth-status');const loginForm=document.getElementById('login-form');const logoutBtn=document.getElementById('logout-btn');const adminContent=document.getElementById('admin-content');const totalUsersElement=document.getElementById('total-users');const totalOrdersElement=document.getElementById('total-orders');const pendingOrdersElement=document.getElementById('pending-orders');const failedOrdersElement=document.getElementById('failed-orders');const usersContainer=document.getElementById('users-container');const ordersContainer=document.getElementById('orders-container');const editUserModal=document.getElementById('edit-user-modal');const editOrderModal=document.getElementById('edit-order-modal');const editUserForm=document.getElementById('edit-user-form');const editOrderForm=document.getElementById('edit-order-form');onAuthStateChanged(auth,(user)=>{if(user){authStatus.textContent=`Logged in as:${user.email}`;loginForm.classList.add('hidden');logoutBtn.classList.remove('hidden');adminContent.classList.remove('hidden');setupRealTimeListeners()}else{authStatus.textContent='Not logged in';loginForm.classList.remove('hidden');logoutBtn.classList.add('hidden');adminContent.classList.add('hidden')}});document.getElementById('login-btn').addEventListener('click',()=>{const email=document.getElementById('email').value;const password=document.getElementById('password').value;signInWithEmailAndPassword(auth,email,password).then(()=>{notyf.success('Logged in successfully')}).catch((error)=>{notyf.error('Login failed: '+error.message)})});document.getElementById('logout-btn').addEventListener('click',()=>{signOut(auth).then(()=>{notyf.success('Logged out successfully')}).catch((error)=>{notyf.error('Logout failed: '+error.message)})});function setupRealTimeListeners(){const usersRef=ref(db,'users');const ordersRef=ref(db,'orders');onValue(usersRef,(snapshot)=>{const users=snapshot.val();updateUsersUI(users)},(error)=>{console.error("Error fetching users:",error);notyf.error('Error fetching users: '+error.message)});onValue(ordersRef,(snapshot)=>{const orders=snapshot.val();updateOrdersUI(orders)},(error)=>{console.error("Error fetching orders:",error);notyf.error('Error fetching orders: '+error.message)})}function updateUsersUI(users){usersContainer.innerHTML='';let totalUsers=0;if(users){for(const[userId,user]of Object.entries(users)){totalUsers++;const userCard=createUserCard(userId,user);usersContainer.appendChild(userCard)}}totalUsersElement.textContent=totalUsers}function updateOrdersUI(orders){ordersContainer.innerHTML='';let totalOrders=0;let pendingOrders=0;let failedOrders=0;if(orders){for(const[orderId,order]of Object.entries(orders)){totalOrders++;if(order.status==='pending')pendingOrders++;if(order.status==='failed')failedOrders++;const orderCard=createOrderCard(orderId,order);ordersContainer.appendChild(orderCard)}}totalOrdersElement.textContent=totalOrders;pendingOrdersElement.textContent=pendingOrders;failedOrdersElement.textContent=failedOrders}function createUserCard(userId,user){const card=document.createElement('div');card.className='bg-white p-4 rounded-lg shadow card';card.innerHTML=` <h3 class="text-lg font-semibold mb-2">${user.username}</h3><p class="text-sm mb-1"><i class="fas fa-envelope mr-2"></i>${user.email}</p><p class="text-sm mb-2"><i class="fas fa-phone mr-2"></i>${user.phone}</p><div class="flex justify-end"><button class="edit-user mr-2 bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition duration-300 text-xs"><i class="fas fa-edit mr-1"></i>Edit </button><button class="delete-user bg-red-500 text-white p-2 rounded hover:bg-red-600 transition duration-300 text-xs"><i class="fas fa-trash-alt mr-1"></i>Delete </button></div>`;card.querySelector('.edit-user').addEventListener('click',()=>openEditUserModal(userId,user));card.querySelector('.delete-user').addEventListener('click',()=>deleteUser(userId));return card}function createOrderCard(orderId,order){const card=document.createElement('div');card.className='bg-white p-4 rounded-lg shadow card';card.innerHTML=` <h3 class="text-lg font-semibold mb-2">Order #${orderId.slice(-6)}</h3><p class="text-sm mb-1"><i class="fas fa-user mr-2"></i>${order.username}</p><p class="text-sm mb-1"><i class="fas fa-phone mr-2"></i>${order.phoneNumber}</p><p class="text-sm mb-1"><i class="fas fa-database mr-2"></i>${order.size}</p><p class="text-sm mb-1"><i class="fas fa-money-bill-wave mr-2"></i>₵${order.total}</p><p class="text-sm mb-2"><i class="fas fa-clock mr-2"></i>${new Date(order.timestamp).toLocaleString()}</p><p class="text-sm mb-2"><span class="font-semibold">Status:</span><span class="status-${order.status}">${order.status}</span></p><div class="flex justify-end"><button class="edit-order mr-2 bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition duration-300 text-xs"><i class="fas fa-edit mr-1"></i>Edit </button><button class="delete-order bg-red-500 text-white p-2 rounded hover:bg-red-600 transition duration-300 text-xs"><i class="fas fa-trash-alt mr-1"></i>Delete </button></div>`;card.querySelector('.edit-order').addEventListener('click',()=>openEditOrderModal(orderId,order));card.querySelector('.delete-order').addEventListener('click',()=>deleteOrder(orderId));return card}function openEditUserModal(userId,user){document.getElementById('edit-user-id').value=userId;document.getElementById('edit-username').value=user.username;document.getElementById('edit-email').value=user.email;document.getElementById('edit-phone').value=user.phone;editUserModal.classList.remove('hidden')}function openEditOrderModal(orderId,order){document.getElementById('edit-order-id').value=orderId;document.getElementById('edit-order-status').value=order.status;editOrderModal.classList.remove('hidden')}async function deleteUser(userId){if(confirm('Are you sure you want to delete this user?')){try{await remove(ref(db,`users/${userId}`));notyf.success('User deleted successfully')}catch(error){console.error("Error deleting user:",error);notyf.error('Error deleting user: '+error.message)}}}async function deleteOrder(orderId){if(confirm('Are you sure you want to delete this order?')){try{await remove(ref(db,`orders/${orderId}`));notyf.success('Order deleted successfully')}catch(error){console.error("Error deleting order:",error);notyf.error('Error deleting order: '+error.message)}}}editUserForm.addEventListener('submit',async(e)=>{e.preventDefault();const userId=document.getElementById('edit-user-id').value;const updatedUser={username:document.getElementById('edit-username').value,email:document.getElementById('edit-email').value,phone:document.getElementById('edit-phone').value};try{await update(ref(db,`users/${userId}`),updatedUser);notyf.success('User updated successfully');editUserModal.classList.add('hidden')}catch(error){console.error("Error updating user:",error);notyf.error('Error updating user: '+error.message)}});editOrderForm.addEventListener('submit',async(e)=>{e.preventDefault();const orderId=document.getElementById('edit-order-id').value;const updatedOrder={status:document.getElementById('edit-order-status').value};try{await update(ref(db,`orders/${orderId}`),updatedOrder);notyf.success('Order updated successfully');editOrderModal.classList.add('hidden')}catch(error){console.error("Error updating order:",error);notyf.error('Error updating order: '+error.message)}});document.getElementById('close-edit-user-modal').addEventListener('click',()=>{editUserModal.classList.add('hidden')});document.getElementById('close-edit-order-modal').addEventListener('click',()=>{editOrderModal.classList.add('hidden')});</script></body></html>
